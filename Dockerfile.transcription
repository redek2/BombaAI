FROM python:3.10-slim

RUN apt-get update && apt-get install -y \
    ffmpeg \
    findutils \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

RUN pip install --no-cache-dir \
    faster-whisper \
    python-dotenv \
    tqdm \
    nvidia-cublas-cu12 \
    nvidia-cudnn-cu12

RUN find /usr/local/lib/python3.10/site-packages/nvidia -name "*.so*" -exec ln -sf {} /usr/lib/ \;

CMD ["bash"]